---
export interface Props {
  gaTagId: string
}

const { gaTagId } = Astro.props
---

<!-- Global site tag (gtag.js) - Google Analytics -->{
  gaTagId && (
    <script
      async
      defer
      src={`https://www.googletagmanager.com/gtag/js?id=${gaTagId}`}
    />
  )
}

<script is:inline define:vars={{ gaTagId }}>
  window.dataLayer = window.dataLayer || []

  function gtag() {
    dataLayer.push(arguments)
  }

  gtag('js', new Date())

  gtag('config', gaTagId)
</script>

---
const gaUserAgent = import.meta.env.GA_KEY;
---

<!-- Global site tag (gtag.js) - Google Analytics -->{
  gaUserAgent && (
    <script
      async
      defer
      src={`https://www.googletagmanager.com/gtag/js?id=${gaUserAgent}`}
    />
  )
}

<script define:vars={{ gaUserAgent }}>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }
  // @ts-ignore
  gtag("js", new Date());

  // @ts-ignore
  gtag("config", gaUserAgent);
</script>
